<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Matplotlib | WH&#39;s Blog</title>
<link rel="shortcut icon" href="https://blog.writerpass.top/favicon.ico?v=1691630620161">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://blog.writerpass.top/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Matplotlib | WH&#39;s Blog - Atom Feed" href="https://blog.writerpass.top/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-162134168-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-162134168-1');
</script>


    <meta name="description" content="Main Intro
Visualization with Python
It's a comprehensive library for creating static, animated, and interactive visuali..." />
    <meta name="keywords" content="Documetation,Python3" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://blog.writerpass.top">
  <img class="avatar" src="https://blog.writerpass.top/images/avatar.png?v=1691630620161" alt="">
  </a>
  <h1 class="site-title">
    WH&#39;s Blog
  </h1>
  <p class="site-description">
    it's just a blog
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/about" class="menu">
          关于
        </a>
      
    
      
        <a href="/friends" class="menu">
          友链
        </a>
      
    
      
        <a href="https://blog.writerpass.top/atom.xml" class="menu" target="_blank">
          Feed|RSS
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/alone-wolf" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Matplotlib
            </h2>
            <div class="post-info">
              <span>
                2021-02-20
              </span>
              <span>
                26 min read
              </span>
              
                <a href="https://blog.writerpass.top/Kj7_GEyVa/" class="post-tag">
                  # Documetation
                </a>
              
                <a href="https://blog.writerpass.top/oD2ZzofKq/" class="post-tag">
                  # Python3
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h2 id="main-intro">Main Intro</h2>
<p>Visualization with Python</p>
<p>It's a comprehensive library for creating static, animated, and interactive visualizations in Python.</p>
<ul>
<li>Create
<ul>
<li>Develop publication quality plots with just a few lines of code</li>
<li>Use interactive figures that can zoom, pan, update</li>
</ul>
</li>
<li>Customize
<ul>
<li>Take full control of line styles, font properties, axes properties...</li>
<li>Export and embed to a number of file formats and interactive environments</li>
</ul>
</li>
<li>Extend
<ul>
<li>Explore tailored functionality provided by third party packages</li>
<li>Learn more about Matplotlib through the many external learning resources</li>
</ul>
</li>
</ul>
<h2 id="users-guide">User's Guide</h2>
<h3 id="install-guide">Install Guide</h3>
<p><code>python -m pip install -U pip</code><br>
<code>python -m pip install -U matplotlib</code><br>
or<br>
<code>python -m pip install -U matplotlib --prefer-binary</code></p>
<h3 id="tutorials">Tutorials</h3>
<h4 id="intro">Intro</h4>
<h5 id="usage-guide">Usage Guide</h5>
<pre><code class="language-python">import matplotlib.pyplot as plt
import numpy as np
</code></pre>
<h5 id="a-simple-example">A simple example</h5>
<pre><code class="language-python">fig, ax = plt.subplots() # create a figure containing a sing axes
ax.plot([1,2,3,4],[1,4,2,3]) # plot some data on the axes
</code></pre>
<p>&quot;&quot;&quot; here is graph &quot;&quot;&quot;</p>
<p>or Creating An Axes is not required, like this below</p>
<p><code>plt.plot([1,2,3,4],[1,4,2,3])</code></p>
<p>&quot;&quot;&quot; here is graph &quot;&quot;&quot;</p>
<h5 id="parts-of-a-figure">Parts of a Figure</h5>
<p>one graph contains these parts<br>
<img src="https://matplotlib.org/_images/anatomy.png" alt="" loading="lazy"></p>
<h6 id="figure">Figure</h6>
<p>the easiest way to create a new figure is with pyplot</p>
<pre><code class="language-python">fig = plt.figure() # an empty figure with no Axes
fig, ax = plt.subplots() # a firgure with a single Axes
fig, axs = plt.subplots(2, 2)
</code></pre>
<p>It's convenient to create the axes together with the figure, but you can also add axes later on, allowing for more complex axes layouts.</p>
<h6 id="axes">Axes</h6>
<p>This is what you think of as 'a plot', it is the region of the image with the data space. A given figure can contain many Axes, but a given Axes object can only be in one Figure. The Axes contains two ( or three in the case of 3D ) Axis objects ( be aware of the difference between Axes and Axis ) which take care of the data limits ( the data limits can also be controlled via this axes.Axes.set_xlim() and axes.Axes.set_ylim() methods ). Each Axes has a title ( set via set_title() ), an x-label ( set via set_xlabel() ), and a y-label ( set via set_ylabel() ).</p>
<p>The Axes class and its member function are this primary entry point to working with the OO interface.</p>
<h6 id="axis">Axis</h6>
<p>These are the number-line-like objects. They take care of setting the graph limits and generating the ticks ( the marks on the axis ) and tick-labels ( strings labeling the ticks ). The location of the ticks is determined by a Locator object and the tick-label strings are formatted by a Formatter. The combination of the correct Locator and Formatter gives very fine control over the tick locations and labels.</p>
<h6 id="artist">Artist</h6>
<p>Basically everything you can see on the figure is an artist ( even the Figure, Axes, and Axis objects ). This includes Text objects, Line-2D objects, collections objects, Patch objects ... ( you get the idea ). When the figure is rendered, all of the artists are drawn to the canvas. Most Artists are tied to an Axes; such an Artist cannot be shared by multiple Axes, or moved from one to another.</p>
<h5 id="types-of-inputs-to-plotting-functions">Types of inputs to plotting functions</h5>
<p>All of plotting functions expect <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array"><code>numpy.array</code></a> or <a href="https://numpy.org/doc/stable/reference/generated/numpy.ma.masked_array.html#numpy.ma.masked_array"><code>numpy.ma.masked_array</code></a> as input.</p>
<p>Classes that are 'array-like' such as <a href="https://pandas.pydata.org/pandas-docs/stable/index.html#module-pandas"><code>pandas</code></a> data objects and <a href="https://numpy.org/doc/stable/reference/generated/numpy.matrix.html#numpy.matrix"><code>numpy.matrix</code></a> may or may not work as intended. It is best to convert these to <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array"><code>numpy.array</code></a> objects prior to plotting.</p>
<p>-- For example, to convert a <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame"><code>pandas.DataFrame</code></a></p>
<pre><code class="language-python">a = pandas.DataFrame(np.random.rand(4, 5),columns = list('abcde'))
a_as_array = a.values
</code></pre>
<p>and to convert a <a href="https://numpy.org/doc/stable/reference/generated/numpy.matrix.html#numpy.matrix"><code>numpy.matrix</code></a></p>
<pre><code class="language-python">b = np.matrix([1, 2], [3, 4])
b_as_array = np.asarray(b)
</code></pre>
<h5 id="the-object-oriented-interface-and-the-pyplot-interface">The object-oriented interface and the pyplot interface</h5>
<p>As noted above, there are essentially two ways to use Matplotlib:</p>
<ul>
<li>Explicitly  create figures and axes, and call methods on them ( the &quot; object-oriented ( OO ) style &quot; ).</li>
<li>Rely on pyplot to automatically create and manage the figures and axes, and use pyplot functions for plotting.</li>
</ul>
<p>So one can do ( OO-stype )</p>
<pre><code class="language-python">x = np.linspace(0,2,100)

# Note that even in the OO-style, we use '.pyplot.figure' to create the figure
fig, ax = plt.subplot() # create a figure and an axes
ax.plot(x,x,label='linear') # plot some data on the axes
ax.plot(x,x**2, label='quadratic') # plot more data on the axes
ax.plot(x,x**3, label='cubic') # plot more data on the axes
ax.set_xlabel('x label') # add an x-label to the axes
ax.set_ylabel('y label') # add an y-label to the axes
ax.set_title('simple plot') # add a title to the axes
ax.legend() # add a legend
</code></pre>
<p>or (pyplot-style)</p>
<pre><code class="language-python">x = np.linspace(0,2,100)
plt.plot(x,x,label='linear') # plot some data on the (implicit) axes
plt.plot(x,x**2,label='quadratic')
plt.plot(x,x**3,label='cubic')
plt.xlabel('x label')
plt.ylabel('y label')
plt.title('simple plot')
plt.legend()
</code></pre>
<h5 id="skip-embedding-matplotlib-in-a-gui-application">Skip!!! Embedding Matplotlib in a GUI application</h5>
<p>Actually there is a third approach, for the case where you are embedding Matplotlib in a GUI application, which completely drops pyplot, even for figure creation. We won't discuss it here; see the corresponding section in the gallery for more info (<a href="https://matplotlib.org/gallery/index.html#user-interfaces">Embedding Matplotlib in graphical user interfaces</a>).</p>
<h5 id="and">AND</h5>
<p>Matplotlib's documentation and examples use both the OO and the pyplot approaches (which are equally powerful), and you should feel free to use either (however, it is preferable pick one of them and stick to it, instead of mixing them). In general, we suggest to restrict pyplot to interactive plotting (e.g., in a Jupyter notebook), and to prefer the OO-style for non-interactive plotting (in functions and scripts that are intended to be reused as part of a larger project).</p>
<pre><code>Note:
In older examples, you may find examples that instead used the so-called pylab interface, via from pylab import *. This is star-import imports everything both from pylot and from numpy, so that one could do
</code></pre>
<pre><code class="language-python">x = linspace(0,2,100)
plot(x,x,label='linear')
</code></pre>
<pre><code>for an even more MATLAB-like style. This approach is strongly discouraged nowadays and deperecated; it is only mentioned here because you may still encounter it in the wild.
</code></pre>
<p>Typically one finds oneself making the same plots over and over again, but with different data sets, which leads to needing to write specialized functions to do the plotting. The recommended function signature is something like:</p>
<pre><code class="language-python">def my_plotter(ax,data1,data2,param_dict):
    &quot;&quot;&quot;
    A helper function to make a graph
    
    Parmaters
    ---------
    ax : Axes -- the axes to draw to
    data1 : array -- The x data
    data2 : array -- The y data
    param_dict : dict -- Dictionary of kwargs to pass to ax.plot
    
    Returns
    -------
    out : list -- list of artists added
    &quot;&quot;&quot;
    out = ax.plot(data1,data2,**param_dict)
    return out
</code></pre>
<p>which you would then use as:</p>
<pre><code class="language-python">data1, data2, data3, data4 = np.random.randn(4, 100)
fig, ax = plt.subplots(1, 1)
my_plotter(ax,data1,data2,{&quot;marker&quot;:&quot;x&quot;}
</code></pre>
<p>or if you wanted to have 2 sub-plots:</p>
<pre><code class="language-python">fig, (ax1, ax2) = plt.subplots(1, 2)
my_plotter(ax1, data1, data2, {'marker':'x'})
my_plotter(ax2, data3, data4, {'marker':'o'})
</code></pre>
<p>For these simple examples this style seems like overkill, however once the graphs get slightly more complex it pays off.</p>
<h5 id="backends">Backends</h5>
<h6 id="what-is-a-backends">What is a backends?</h6>
<p>A lot of documentation on the website and in the mailing lists refers to the &quot;backend&quot; and many new users are confused by this term. matplotlib targets many different use cases and output formats. Some people use matplotlib interactively from the python shell and have plotting windows pop up when they type commands. Some people run <a href="https://jupyter.org/">Jupyter</a> notebooks and draw inline plots for quick data analysis. Others embed matplotlib into graphical user interfaces like wxpython or pygtk to build rich applications. Some people use matplotlib in batch scripts to generate postscript images from numerical simulations, and still others run web application servers to dynamically serve up graphs.</p>
<p>To support all of these use cases, matplotlib can target different outputs, and each of these capabilities is called a backend; the &quot;frontend&quot; is the user facing code, i.e., the plotting code, whereas the &quot;backend&quot; does all the hard work behind-the-scenes to make the figure. There are two types of backends: user interface backends (for use in pygtk, wxpython, tkinter, qt4, or macosx; also referred to as &quot;interactive backends&quot;) and hardcopy backends to make image files (PNG, SVG, PDF, PS; also referred to as &quot;non-interactive backends&quot;).</p>
<h6 id="selecting-a-backend">Selecting a backend</h6>
<p>There are three ways to configure your backend:</p>
<ol>
<li>The rcParams[&quot;&quot;backend] ( default:'agg' ) parameter in your matplotlibrc file</li>
<li>The MPLBACKEND environment variable</li>
<li>The function matplotlib.use()</li>
</ol>
<p>A more detailed description is given below.</p>
<p>If multiple of these are configurations are present, the last one from the list takes precedence; e.g. calling matplotlib.use() will override the setting in your matplotbibrc.</p>
<p>If no backend is explicitly set, Matplotlib automatically detects s usable backend based on what is available on your system and on whether a GUI event loop is already running. On Linux, if the environment variable DISPLAY is unset, the &quot;event loop&quot;  ids identified as &quot;headless&quot;, which causes a fallback to a non-interactive backend (agg).</p>
<p>Here is a detailed description of the configuration methods:</p>
<ol>
<li>
<p>setting rcParams[&quot;backend&quot;] (default:'agg') in your matplotlibrc file:</p>
<p><code>backend: qt5agg # use pyqt5 with antigrain (agg) rendering</code></p>
<p>See also <a href="https://matplotlib.org/tutorials/introductory/customizing.html">Customizing Matplotlib with style sheets and rcParams</a>.</p>
</li>
<li>
<p>Setting the MPLBACKEND environment variable:</p>
<p>you can set the environment variable either for your current shell or for a single script.</p>
<p>On Unix:</p>
<pre><code class="language-shell">export MPLBACKEND=qt5agg
</code></pre>
<p>On windows:</p>
<pre><code class="language-cmd">set MPLBACKEND=qt5agg
</code></pre>
<p>Setting this environment variable will override the backend parameter in any matplotlibrc, even if there is a matplotlibrc in your current working directory. Therefore, setting MPLBACKEND globally, e.g. in your .bashrc or .profile, is discouraged as it might lead to counter-intuitive behavior.</p>
</li>
<li>
<p>If your script depends on a specific you can use the function matplotlib.use()</p>
<pre><code class="language-python">import matplotlib
matplotlib.use('qt5agg')
</code></pre>
<p>This should be done before any figure is created; otherwise Matplotlib may fail to switch the backend and raise an ImportError.</p>
<p>Using use will require changes in your code if users want to use a different backend. Therefore, you should avoid explicitly calling use unless absolutely necessary.</p>
</li>
</ol>
<h5 id="the-built-in-backends">The built-in backends</h5>
<p>By default, Matplotlib should automatically select a default backend which allows both interactive work and plotting from scripts, with output to the screen and/or to a file, so at least initially you will not need to worry about the backend. The most common exception is if your Python distribution coms without tkinter and you have no other GUI toolkit installed; this happends on certain on certain Linux distributions, where you need to install a Linux package named python-tk ( so similar )</p>
<p>If, however, you want to write graphical user interfaces, or a web application server (<a href="https://matplotlib.org/stable/faq/howto_faq.html#howto-webapp">How to use Matplotlib in a web application server</a>), or need a better understanding of what is going on, read on. To make things a little more customizable for graphical user interfaces, matplotlib separates the concept of the renderer (the thing that actually does the drawing) from the canvas (the place where the drawing goes). The canonical renderer for user interfaces is <code>Agg</code> which uses the <a href="http://antigrain.com/">Anti-Grain Geometry</a> C++ library to make a raster (pixel) image of the figure; it is used by the <code>Qt5Agg</code>, <code>Qt4Agg</code>, <code>GTK3Agg</code>, <code>wxAgg</code>, <code>TkAgg</code>, and <code>macosx</code> backends. An alternative renderer is based on the Cairo library, used by <code>Qt5Cairo</code>, <code>Qt4Cairo</code>, etc.</p>
<p>For the rendering engines, one can also distinguish between <a href="https://en.wikipedia.org/wiki/Vector_graphics">vector</a> or <a href="https://en.wikipedia.org/wiki/Raster_graphics">raster</a> renderers. Vector graphics languages issue drawing commands like &quot;draw a line from this point to this point&quot; and hence are scale free, and raster backends generate a pixel representation of the line whose accuracy depends on a DPI setting.</p>
<p>Here is a summary of the matplotlib renderers ( there is an eponymous backend for each; these are non-interactive backends, capable of writing to a file ):</p>
<table>
<thead>
<tr>
<th>Renderer</th>
<th>FileType</th>
<th>Des</th>
</tr>
</thead>
<tbody>
<tr>
<td>AGG</td>
<td>png</td>
<td><a href="https://en.wikipedia.org/wiki/Raster_graphics">raster</a> graphics -- high quality images using the <a href="http://antigrain.com/">Anti-Grain Geometry</a> engine</td>
</tr>
<tr>
<td>PDF</td>
<td>pdf</td>
<td><a href="https://en.wikipedia.org/wiki/Vector_graphics">vector</a> graphics -- <a href="https://en.wikipedia.org/wiki/Portable_Document_Format">Portable Document Format</a></td>
</tr>
<tr>
<td>PS</td>
<td>ps,eps</td>
<td><a href="https://en.wikipedia.org/wiki/Vector_graphics">vector</a> graphics -- <a href="https://en.wikipedia.org/wiki/PostScript">Postscript</a> output</td>
</tr>
<tr>
<td>SVG</td>
<td>svg</td>
<td><a href="https://en.wikipedia.org/wiki/Vector_graphics">vector</a> graphics -- <a href="https://en.wikipedia.org/wiki/Scalable_Vector_Graphics">Scalable Vector Graphics</a></td>
</tr>
<tr>
<td>PGF</td>
<td>pgf,pdf</td>
<td><a href="https://en.wikipedia.org/wiki/Vector_graphics">vector</a> graphics -- using the <a href="https://ctan.org/pkg/pgf">pgf</a> package</td>
</tr>
<tr>
<td>Cairo</td>
<td>png,ps,pdf,svg</td>
<td><a href="https://en.wikipedia.org/wiki/Raster_graphics">raster</a> or <a href="https://en.wikipedia.org/wiki/Vector_graphics">vector</a> graphics -- using the <a href="https://www.cairographics.org/">Cairo</a> library</td>
</tr>
</tbody>
</table>
<p>To save plots using the non-interactive backends, use the matplotlib.pyplot.savefig(&quot;filename&quot;) method.</p>
<p>And there are the user interfaces and renderer combinations supported; these are interactive backends, capable of displaying to the screen and of using appropriate renderers from the table above to write to a file:</p>
<table>
<thead>
<tr>
<th>Backend</th>
<th>Des</th>
</tr>
</thead>
<tbody>
<tr>
<td>Qt5Agg</td>
<td>Agg rendering in a <a href="https://matplotlib.org/stable/glossary/index.html#term-Qt5">Qt5</a> canvas (requires <a href="https://riverbankcomputing.com/software/pyqt/intro">PyQt5</a>). This backend can be activated in IPython with <code>%matplotlib qt5</code>.</td>
</tr>
<tr>
<td>ipympl</td>
<td>Agg rendering embedded in a Jupyter widget. (requires ipympl). This backend can be enabled in a Jupyter notebook with <code>%matplotlib ipympl</code>.</td>
</tr>
<tr>
<td>GTK3Agg</td>
<td>Agg rendering to a <a href="https://matplotlib.org/stable/glossary/index.html#term-GTK">GTK</a> 3.x canvas (requires <a href="https://wiki.gnome.org/action/show/Projects/PyGObject">PyGObject</a>, and <a href="https://www.cairographics.org/pycairo/">pycairo</a> or <a href="https://pythonhosted.org/cairocffi/">cairocffi</a>). This backend can be activated in IPython with <code>%matplotlib gtk3</code>.</td>
</tr>
<tr>
<td>macosx</td>
<td>Agg rendering into a Cocoa canvas in OSX. This backend can be activated in IPython with <code>%matplotlib osx</code>.</td>
</tr>
<tr>
<td>TkAgg</td>
<td>Agg rendering to a <a href="https://matplotlib.org/stable/glossary/index.html#term-Tk">Tk</a> canvas (requires <a href="https://docs.python.org/3/library/tk.html">TkInter</a>). This backend can be activated in IPython with <code>%matplotlib tk</code>.</td>
</tr>
<tr>
<td>nbAgg</td>
<td>Embed an interactive figure in a Jupyter classic notebook. This backend can be enabled in Jupyter notebooks via <code>%matplotlib notebook</code>.</td>
</tr>
<tr>
<td>WebAgg</td>
<td>On <code>show()</code> will start a tornado server with an interactive figure.</td>
</tr>
<tr>
<td>GTK3Cairo</td>
<td>Cairo rendering to a <a href="https://matplotlib.org/stable/glossary/index.html#term-GTK">GTK</a> 3.x canvas (requires <a href="https://wiki.gnome.org/action/show/Projects/PyGObject">PyGObject</a>, and <a href="https://www.cairographics.org/pycairo/">pycairo</a> or <a href="https://pythonhosted.org/cairocffi/">cairocffi</a>).</td>
</tr>
<tr>
<td>Qt4Agg</td>
<td>Agg rendering to a <a href="https://matplotlib.org/stable/glossary/index.html#term-Qt4">Qt4</a> canvas (requires <a href="https://riverbankcomputing.com/software/pyqt/intro">PyQt4</a> or <code>pyside</code>). This backend can be activated in IPython with <code>%matplotlib qt4</code>.</td>
</tr>
<tr>
<td>wxAgg</td>
<td>Agg rendering to a <a href="https://matplotlib.org/stable/glossary/index.html#term-wxWidgets">wxWidgets</a> canvas (requires <a href="https://www.wxpython.org/">wxPython</a> 4). This backend can be activated in IPython with <code>%matplotlib wx</code>.</td>
</tr>
</tbody>
</table>
<hr>
<p><code>The names of builtin backends case-insensitive; e.g., 'Qt5Agg' and 'qt5agg' are equivalent.</code></p>
<h6 id="ipympl">ipympl</h6>
<p>The Jupyter widget ecosystem is moving too fast to support directly in Matplotlib. To install ipympl</p>
<pre><code class="language-shell">pip install ipympl
jupyter nbextension enable --py --sys-prefix ipympl
</code></pre>
<p>or</p>
<p><code>conda install ipympl -c conda-forge</code>  Further: see <a href="https://github.com/matplotlib/jupyter-matplotlib">jupyter-matplotlib</a> for more details.</p>
<h6 id="how-do-i-select-pyqt4-for-pyside">How do i select PyQt4 for PySide?</h6>
<p>The <a href="https://matplotlib.org/stable/faq/environment_variables_faq.html#envvar-QT_API"><code>QT_API</code></a> environment variable can be set to either <code>pyqt</code> or <code>pyside</code> to use <code>PyQt4</code> or <code>PySide</code>, respectively.</p>
<p>Since the default value for the bindings to be used is <code>PyQt4</code>, Matplotlib first tries to import it, if the import fails, it tries to import <code>PySide</code>.</p>
<h6 id="using-non-built-in-backends">Using non-built-in backends</h6>
<p>More generally, any importable backend can be selected by using any of the methods above . If name of the backend is the module containing the backend, use module://name.of.the.backend as the backend name, e.g. matplotlib.use('module://name.of.the.backend').</p>
<h5 id="what-is-interactive-mode">What is interactive mode?</h5>
<p>Use of an interactive backend (see <a href="https://matplotlib.org/stable/tutorials/introductory/usage.html#what-is-a-backend">What is a backend?</a>) permits-but does not by itself require or ensure--plotting to the screen. Whether and when plotting to the screen occurs, and whether a script or shell session continues after a plot is drawn on the screen, depends on the functions and methods that are called, and on a state variable that determines whether matplotlib is in &quot;interactive mode&quot;. The default Boolean value is set by the <code>matplotlibrc</code> file, and may be customized like any other configuration parameter (see <a href="https://matplotlib.org/stable/tutorials/introductory/customizing.html">Customizing Matplotlib with style sheets and rcParams</a>). It may also be set via <code>matplotlib.interactive()</code> and its value may be queried via <code>matplotlib.is_interactive()</code>. Turning interactive mode on and off in the middle of a stream of plotting commands, whether in a script or in a shell, is already needed and potentially confusing, so in the following we will assume all plotting is done with interactive mode either on or off.</p>
<pre><code>Note
Major changes related to ineractivity, and in particular the role and behavior of ` show() `, were made in the transition to matplotlib version 1.0, and bugs where fixed in 1.0.1. Here we describe the version 1.0.1 behavior for the primary interactive backends, with the partial exception of macosx.
</code></pre>
<p>Interactive mode may also be turned on via <code>matplotlib.pyplot.ion()</code> , and turned off via <code>matplotlib.pyplot.ioff()</code>.</p>
<pre><code>Note
Interactive mode works with suitable backends in ipython and in the ordinary python shell, but it does not work in the IDLE IDE. If the default backend does not support interactivity, an interactive backend can be explicitly activated using any of the mathods disscussed in What is a backend?
</code></pre>
<h6 id="interactive-example">Interactive example</h6>
<p>From an ordinary python prompt, or after invoking ipython with on options, try this:</p>
<pre><code class="language-python">import matplotlib.pyplot as plt
plt.ion()
plt.plot([1.6,2.7])
</code></pre>
<p>This will pop up a plot window. Your terminal prompt will remain active, so that you can type additional commands such as:</p>
<pre><code class="language-python">plt.title(&quot;interactive test&quot;)
plt.xlabel(&quot;index&quot;)
</code></pre>
<p>On most interactive backends, the figure window will also be updated if you change it via the object-oriented interface. E.G. get a reference to the Axes instance, and call a method of that instance:</p>
<pre><code class="language-python">ax=plt.gca()
ax.plot([3.1,2.2])
</code></pre>
<p>If you are using certain backends (like macosx), or and older version of metplotlib, you may not see the new line added to the plot immediately. In this case, you need to explicitly call <code>draw()</code> in order to update the plot:</p>
<p><code>plt.draw()</code></p>
<h6 id="non-interactive-example">Non-interactive example</h6>
<p>Start a fresh session as in the previous example, but now turn interactive mode off:</p>
<pre><code class="language-python">import matplotlib.pyplot as plt
plt.ioff()
plt.plot([1.6,2.7])
</code></pre>
<p>Nothing happened-- or at least nothing has shown up on the screen ( unless you are using macosx backend, which is anomalous ). To make the plot appear, you need to do this:</p>
<p><code>plt.show()</code></p>
<p>Now you see the plot, but your terminal command line is unresponsive; <code>pyplot.show()</code> blocks the input of additional commands until you manually kill the plot window.</p>
<p>What good is this--being forced to use a blocking function? Suppose you need a script the plots the contents of a file the screen. You want to look at that plot, and then end the script. Without some blocking command such as show(), the script would flash up the plot and then end immediately, leaving nothing on the screen.</p>
<p>In addition, non-interactive mode delays all drawing until show() is called; this is more efficient than redrawing the plot each time a line in the script adds a new feature.</p>
<p>Prior to version 1.0 show() generally could not be called more than once in a single script ( although sometimes one could get away with it ); for version 1.0.1 and above, this restriction is lifted, so one can write a script like this:</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

plt.ioff()
for i in range(3):
    plt.plot(np.random.rand(10))
    plt.show()
</code></pre>
<p>which makes three plots, one at a time. I.E. the second plot will show up, once the first plot is closed.</p>
<h6 id="summary">Summary</h6>
<p>In interactive mode, pyplot function automatically draw to the screen.</p>
<p>When plotting interactively, if using object method calls in addition to pyplot functions, then call draw() whether you want to refresh the plot.</p>
<p>Use non-interactive mode in scripts in which you want to generate one or more figures and display them ending or generating a new set of figures. In that case, use show() to display the figure(s) and to block execution until you have manually destroyed them.</p>
<h5 id="performance">Performance</h5>
<p>Whether exploring data in interactive mode or programmatic-ally saving lots of plots, rendering performance can be a painful bottleneck in your pipeline. Matplotlib provides a coupe ways to greatly reduce rendering time at the coast of a slight change ( to a settable tolerance ) in your plot's appearance. The methods available to reduce rendering time on the type of plot that is being created.</p>
<h6 id="line-segment-simplification">Line segment simplification</h6>
<p>For plots that have line segments ( e.g. typical line plots, outlines of polygons, etc. ), rendering performance can be controlled by <code>rcParams[&quot;path.simply&quot;]</code> (default True) and <code>rcParams[&quot;path.simplify_threshold&quot;]</code> (default 0.111111111111). Which can be defined e.g. in the matplotlibrc file (see <a href="https://matplotlib.org/stable/tutorials/introductory/customizing.html">Customizing Matplotlib with style sheets and rcParams</a> for more information about the <code>matplotlibrc</code> file).</p>
<p><code>rcParams[&quot;path.simplify&quot;]</code> is a boolean indicating whether or not line segments are simplified at all.</p>
<p><code>rcParams[&quot;path.simplify_threshold&quot;]</code> ( default 0.111111111111 ) controls how much line segments are simplified; higher thresholds result in quicker rendering.</p>
<p>The following script will first display the data without any simplification, and then display the same data with simplification. Try interacting with both of them:</p>
<pre><code class="language-python">import numpy as py
import matplotlib.pyplot as plt
import matplotlib as mpl

# Setup , and create the data to plot
y = np.random.rand(100000)
y[50000:] *= 2
y[np.geomspace(10,50000,400).astype(int)] = -1
mpl.rcParams['path.simplify'] = True

mpl.rcParams['path.simplify_threshold'] = 0.0
plt.plot(y)
plt.show()

mpl.rcParams['path.simplify_threshold'] = 1.0
plt.plot(y)
plt.show()
</code></pre>
<p>Matplotlib currently defaults to a conservative simplification threshold of 1/9. If you want to change your default settings to use a different value, you can change your matplotlibrc file. Alternatively, you could create a new style for interactive plotting ( with maximal simplification ) and another style for publication quality plotting ( with minimal simplification ) and activate them as necessary. See <a href="https://matplotlib.org/stable/tutorials/introductory/customizing.html">Customizing Matplotlib with style sheets and rcParams</a> for instructions on how to perform these actions.</p>
<p>The simplification works by merging line segments into a single vector until the next line segment's perpendicular distance to the vector ( measured in display-coordinate space ) is greater than the path.simplify_threshold parameter.</p>
<pre><code>Note
Changes related to how line segments are simplified were made in version 2.1. Rendering time still by these parameters prior to 2.1, but rendering time for some kinds of data will be vastly improved in versions 2.1 and greater.
</code></pre>
<h6 id="splitting-lines-into-smaller-chunks">Splitting lines into smaller chunks</h6>
<p>If you are using the Agg backend (see <a href="https://matplotlib.org/stable/tutorials/introductory/usage.html#what-is-a-backend">What is a backend?</a>), then you can make use of <code>rcParams[&quot;agg.path.chunksize&quot;]</code> ( default 0 ). This is allow you to specify a chunk size, and any lines with greater than that many vertices will be split into multiple lines, each of which has no more than <code>agg.path.chunksize</code> many vertices. ( Unless <code>agg.apth.chunksize</code> is zero, in which case there is no chunking ) For some kind of data, chunking the line up into reasonable sizes can greatly decrease rendering time.</p>
<p>The following script will first display the data without any chunk size restriction, and then display the same data with a chunk size of 10,000. The difference can best be seen when the figures are large, try maximizing the GUI and then interacting with them:</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

mpl.rcParams[&quot;path.simplify_threshold&quot;] = 1.0

# Setup, and create the data to plot
y = np.random.rand(100000)
y[50000:] *= 2
y[np.geomspace(10,50000,400).satype(int)] = -1
mpl.rcParams['path.simplify'] = True

mpl.rcParams['agg.path.chunksize'] = 0
plt.plot(y)
plt.show()

mpl.rcParams['agg.path.chunksize'] = 10000
plt.plot(y)
plt.show()
</code></pre>
<h6 id="legends">Legends</h6>
<p>The default legend behavior for axes attempts to find the location that covers the fewest data point ( loc='best' ). This can be a very expensive computation if there are lots of data points. In this case, you may want to provide a specific location.</p>
<h6 id="using-the-fast-style">Using the fast style</h6>
<p>The fast style can be used to automatically set simplification and chunking parameters to reasonable settings to speed up plotting large amounts of data. It can be used simply by running:</p>
<pre><code class="language-python">import matplotlib.style as mplstyle
mplstyle.use('fast')
</code></pre>
<p>It is very light weight, so it plays nicely with other styles, just make sure the fast style is applied last so that other style do not overwrite the settings:</p>
<pre><code class="language-python">mplstyle.use(['dark_background','ggplot','fast'])
</code></pre>
<p>more:</p>
<p>https://matplotlib.org/stable/tutorials/index.html</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#main-intro">Main Intro</a></li>
<li><a href="#users-guide">User's Guide</a>
<ul>
<li><a href="#install-guide">Install Guide</a></li>
<li><a href="#tutorials">Tutorials</a>
<ul>
<li><a href="#intro">Intro</a>
<ul>
<li><a href="#usage-guide">Usage Guide</a></li>
<li><a href="#a-simple-example">A simple example</a></li>
<li><a href="#parts-of-a-figure">Parts of a Figure</a>
<ul>
<li><a href="#figure">Figure</a></li>
<li><a href="#axes">Axes</a></li>
<li><a href="#axis">Axis</a></li>
<li><a href="#artist">Artist</a></li>
</ul>
</li>
<li><a href="#types-of-inputs-to-plotting-functions">Types of inputs to plotting functions</a></li>
<li><a href="#the-object-oriented-interface-and-the-pyplot-interface">The object-oriented interface and the pyplot interface</a></li>
<li><a href="#skip-embedding-matplotlib-in-a-gui-application">Skip!!! Embedding Matplotlib in a GUI application</a></li>
<li><a href="#and">AND</a></li>
<li><a href="#backends">Backends</a>
<ul>
<li><a href="#what-is-a-backends">What is a backends?</a></li>
<li><a href="#selecting-a-backend">Selecting a backend</a></li>
</ul>
</li>
<li><a href="#the-built-in-backends">The built-in backends</a>
<ul>
<li><a href="#ipympl">ipympl</a></li>
<li><a href="#how-do-i-select-pyqt4-for-pyside">How do i select PyQt4 for PySide?</a></li>
<li><a href="#using-non-built-in-backends">Using non-built-in backends</a></li>
</ul>
</li>
<li><a href="#what-is-interactive-mode">What is interactive mode?</a>
<ul>
<li><a href="#interactive-example">Interactive example</a></li>
<li><a href="#non-interactive-example">Non-interactive example</a></li>
<li><a href="#summary">Summary</a></li>
</ul>
</li>
<li><a href="#performance">Performance</a>
<ul>
<li><a href="#line-segment-simplification">Line segment simplification</a></li>
<li><a href="#splitting-lines-into-smaller-chunks">Splitting lines into smaller chunks</a></li>
<li><a href="#legends">Legends</a></li>
<li><a href="#using-the-fast-style">Using the fast style</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://blog.writerpass.top/FVEPOhPxX/">
              <h3 class="post-title">
                /etc/fstab 说明
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  <a href="https://travellings.link/" target="blank" title="开往-友链接力"><img
    src="https://travellings.link/assets/logo.gif" alt="开往-友链接力" width="120"></a>&nbsp;
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>&nbsp;&nbsp;<a href="https://baidu.com">Baidu</a>
  <a class="rss" href="https://blog.writerpass.top/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>
      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
